# Template para build .NET
parameters:
- name: buildConfiguration
  type: string
  default: 'Release'
- name: projects
  type: string
  default: '**/*.csproj'
- name: restorePackages
  type: boolean
  default: true

steps:
- ${{ if eq(parameters.restorePackages, true) }}:
  - task: DotNetCoreCLI@2
    displayName: 'Restore NuGet packages'
    inputs:
      command: 'restore'
      projects: ${{ parameters.projects }}
      feedsToUse: 'select'

- ${{ if eq(parameters.restorePackages, true) }}:
  - task: DotNetCoreCLI@2
    displayName: 'Build application'
    inputs:
      command: 'build'
      projects: ${{ parameters.projects }}
      arguments: '--configuration ${{ parameters.buildConfiguration }} --no-restore'
- ${{ else }}:
  - task: DotNetCoreCLI@2
    displayName: 'Build application'
    inputs:
      command: 'build'
      projects: ${{ parameters.projects }}
      arguments: '--configuration ${{ parameters.buildConfiguration }}'